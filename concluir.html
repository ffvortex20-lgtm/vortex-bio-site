<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Concluir</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#000;color:white;font-family:Arial;text-align:center}
.container{max-width:420px;margin:auto;padding:30px}
img{width:120px;height:120px;border-radius:50%;border:3px solid white}
button,a{
  display:block;
  width:100%;
  margin:10px auto;
  padding:14px;
  border-radius:8px;
  border:none;
  font-weight:bold
}
.btn{background:#333;color:white}
.btn.done{background:green}
#download{display:none;background:green;color:white}
</style>
</head>

<body>
<div class="container">
<img id="foto">
<h2 id="nome"></h2>

<div id="lista"></div>

<a id="download">â¬‡ Baixar Agora</a>
</div>

<script>
const data = JSON.parse(atob(new URLSearchParams(location.search).get("data")));

document.getElementById("nome").innerText = data.nome;
document.getElementById("foto").src = data.foto || "https://i.imgur.com/8Km9tLL.png";

let total = 0, feitos = 0;

for(let r in data.redes){
  if(data.redes[r]){
    total++;
    const b = document.createElement("button");
    b.className = "btn";
    b.innerText = "Visitar " + r;

    b.onclick = () => {
      window.open(data.redes[r], "_blank");
      b.disabled = true;
      b.classList.add("done");
      feitos++;

      if(feitos === total){
        const d = document.getElementById("download");
        d.href = data.download;
        d.style.display = "block";
      }
    };

    document.getElementById("lista").appendChild(b);
  }
}
</script>
</body>
</html>
