<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Concluir</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#000;color:#fff;font-family:Arial;text-align:center}
.container{max-width:420px;margin:auto;padding:30px}
img{width:120px;height:120px;border-radius:50%;border:3px solid white}
button,a{
  display:block;
  width:100%;
  margin:10px auto;
  padding:14px;
  border-radius:8px;
  border:none;
  font-weight:bold;
}
.btn{background:#333;color:white}
.btn.done{background:green}
#download{display:none;background:green;color:white}
</style>
</head>

<body>
<div class="container">
<img id="foto">
<h2 id="nome"></h2>

<div id="lista"></div>

<a id="download">â¬‡ Baixar Agora</a>
</div>

<script>
const dados = JSON.parse(atob(new URLSearchParams(location.search).get("data")));

document.getElementById("nome").innerText = dados.nome;
document.getElementById("foto").src = dados.foto;

let total = 0;
let feitos = 0;

for(let rede in dados.redes){
  if(dados.redes[rede]){
    total++;
    const btn = document.createElement("button");
    btn.className = "btn";
    btn.innerText = "Visitar " + rede;

    btn.onclick = () => {
      window.open(dados.redes[rede], "_blank");
      btn.disabled = true;
      btn.classList.add("done");
      feitos++;

      if(feitos === total){
        const d = document.getElementById("download");
        d.href = dados.download;
        d.style.display = "block";
      }
    };

    document.getElementById("lista").appendChild(btn);
  }
}
</script>
</body>
</html>
