<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Concluir</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;background:#000;color:white;font-family:Arial;text-align:center}
.container{max-width:420px;margin:auto;padding:30px}
img{width:120px;height:120px;border-radius:50%;border:3px solid white}
button,a{
  display:block;width:100%;margin:10px auto;
  padding:14px;border-radius:8px;
  border:none;font-weight:bold
}
.btn{background:#333;color:white}
.btn.active{background:green}
#download{display:none;background:green;color:white}
</style>
</head>

<body>
<div class="container">
<img id="foto">
<h2 id="nome"></h2>

<div id="botoes"></div>

<a id="download">â¬‡ Baixar agora</a>
</div>

<script>
const d = JSON.parse(atob(new URLSearchParams(location.search).get("data")));

document.body.style.setProperty("--cor", d.cor);
document.getElementById("nome").innerText = d.nome;
document.getElementById("foto").src = d.foto;

let total = 0;
let feitos = 0;

const redes = d.redes;
const box = document.getElementById("botoes");

for(let k in redes){
  if(redes[k]){
    total++;
    const b = document.createElement("button");
    b.innerText = "Visitar " + k;
    b.className = "btn";
    b.onclick = () => {
      window.open(redes[k], "_blank");
      b.disabled = true;
      b.classList.add("active");
      feitos++;
      if(feitos === total){
        const dl = document.getElementById("download");
        dl.style.display = "block";
        dl.href = d.download;
      }
    };
    box.appendChild(b);
  }
}
</script>
</body>
</html>
