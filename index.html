<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Concluir</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#000;
  color:white;
  font-family:Arial;
  text-align:center;
}
.box{
  max-width:420px;
  margin:40px auto;
  padding:20px;
}
button,a{
  width:100%;
  margin:8px 0;
  padding:12px;
  border:none;
  border-radius:6px;
  background:#444;
  color:white;
  font-weight:bold;
}
button:disabled{
  opacity:.4;
}
#download{
  display:none;
  background:green;
}
img{
  width:120px;
  border-radius:50%;
  margin:10px;
}
</style>
</head>

<body>

<div class="box">
  <h2 id="titulo"></h2>
  <img id="foto" style="display:none">

  <div id="botoes"></div>

  <a id="download">⬇ BAIXAR</a>
</div>

<script>
const id = location.hash.replace("#","");
const dados = JSON.parse(localStorage.getItem("bio_"+id));

if(!dados){
  document.body.innerHTML = "❌ Link inválido";
  throw 0;
}

titulo.innerText = dados.titulo;

if(dados.foto){
  foto.src = dados.foto;
  foto.style.display = "block";
}

const redes = [
  ["YouTube", dados.youtube],
  ["Instagram", dados.instagram],
  ["Telegram", dados.telegram],
  ["TikTok", dados.tiktok],
  ["Kwai", dados.kwai],
  ["WhatsApp Grupo", dados.grupo],
  ["WhatsApp Canal", dados.canal],
];

let total = 0;
let feitos = 0;

const container = document.getElementById("botoes");

redes.forEach(r=>{
  if(r[1]){
    total++;
    const btn = document.createElement("button");
    btn.innerText = r[0];
    btn.onclick = () => abrir(r[1]);
    container.appendChild(btn);
  }
});

function abrir(link){
  window.open(link, "_blank");
  feitos++;

  if(feitos >= total){
    const d = document.getElementById("download");
    d.href = dados.download;
    d.style.display = "block";
  }
}
</script>

</body>
</html>
